- form_for [:admin, @image], :url => @url_override || @url,
  :html => { :multipart => true,
    :style => 'float: left; width: 70%' } do |f|
  = f.error_messages
  .field
    - if action_name =~ /(edit)|(update)/
      = t('.use_current_image')
      %em= t('.or')
      = t('.replace_image')
    = f.file_field :uploaded_data
  .field
    %label= t('.maximum_image_size', :megabytes => (Image.attachment_options[:max_size] / 1024 / 1024))
  <div#{(" style='margin-top: #{@image.thumbnails.detect{|t| t.thumbnail == 'medium'}.height - 63}px'" rescue nil) if action_name =~ /(edit)|(update)/ and !@app_dialog}>
  = render :partial => "/shared/admin/form_actions",
    :locals => { :f => f,
      :continue_editing => false,
      :hide_cancel => (@app_dialog or action_name == "insert" or from_dialog?),
      :delete_title => t('admin.images.image.delete.title'),
      :delete_confirmation => t('admin.images.image.delete.message',
      :title => @image.filename) }}
  - if @app_dialog
    %input{:name => "app_dialog", :type => "hidden", :value => @app_dialog}/
    %input{:name => "field", :type => "hidden", :value => @field}/
    %input{:name => "update_image", :type => "hidden", :value => @update_image}/
    %input{:name => "thumbnail", :type => "hidden", :value => @thumbnail}/
    %input{:name => "callback", :type => "hidden", :value => @callback}/
    %input{:name => "conditions", :type => "hidden", :value => @conditions}/
- if action_name =~ /(edit)|(update)/
  %div{:style => "float: right; width: 25%;"}
    %label= t('.current_image')
    = image_fu @image, :medium, { :class => "brown_border" }
