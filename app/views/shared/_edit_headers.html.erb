<%
  # Internet Explorer is fine with JS caching, but cache CSS and kaboom.
  # Would be great if someone could fix this?
  js_caching = RefinerySetting.find_or_set(:use_resource_caching, Rails.root.writable?)
  css_caching = js_caching && request.env['HTTP_USER_AGENT'] !~ /MSIE/
  login = defined?(login) ? login : login?
-%>

  <%= yield :head_before_javascript_libraries -%>
  <%= javascript_include_tag 'refinery/i18n' -%>
  <script type='text/javascript'>I18n.locale = '<%= I18n.locale %>';</script>

<%= jquery_include_tags(:caching => js_caching) -%>

  <%= javascript_include_tag 'http://github.com/rails/jquery-ujs/raw/f01a685c8200b76c4cc2c606accb135da5ad5444/src/rails.js' %>


  <%= javascript_include_tag 'jquery/jquery.corner.js',
                             'jquery/jquery.textTruncate.js',
                             'jquery/jquery.html5-placeholder-shim.js',
                             'jquery/jquery.timers.js',
                             'jquery/jquery.jcarousel.js',
                             :cache => (js_caching ? "cache/jquery-plugins" : false) unless login -%>

<%= javascript_include_tag 'wymeditor/jquery.refinery.wymeditor.js',
                             'refinery/core',
                             'refinery/admin'-%>
<%= javascript_include_tag 'refinery/boot_wym'-%>
<%= stylesheet_link_tag 'wymeditor/skins/refinery/skin' -%>
<%= yield :head -%>
